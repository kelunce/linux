# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# User specific aliases and functions

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib64:/usr/local/lib

alias egrep='egrep --color=auto -n'

alias fgrep='fgrep --color=auto'

alias grep='grep --color=auto'

fc()
{
    find . -name "*.c" -o -name "*.h" | xargs egrep --color=auto -n "$1"
}

ff()
{
    find . -name "*" |  egrep -i $1
}

make()
{
    /usr/bin/make "$@" 2>&1 | grep -E --color=always '\berror:|\bwarning:|$'
}

vlog()
{
    if [ $# -eq 0 ]
    then
        find . -name "*.log" |xargs echo |xargs tail -f
    else
        find . -name "*$1*.log" |xargs echo |xargs tail -f
    fi
}

ve()
{
    find . -name "*.log" |xargs echo |xargs tail -f | grep error -i
}

px()
{
    python tools/parse_table.py . $1 default userd-anker-257-1
}

pm()
{
    python ./tools/autocode/mission/parse_mission.py $(pwd) $1 default
}

buildTags()
{
    #自动生成本目录下面的ctag和cscope信息表
    # 如果传递参数则是vim中调用过来
    if [ $# -gt 0 ] ; then
        cd $1
        cd ..
    fi
    rm -fr .tags
    mkdir .tags
    cd .tags
    ctags  -R --c++-kinds=+p  --fields=+iaS --extra=+q --recurse=yes -o ./tags ../
    cd ..
    # 使用pwd来获取绝对路径,使得find输出的文件路径都是绝对路径
    find `pwd` -name "*.h" -o -name "*.c" -o -name "*.cpp" -o -name "*.decl" > cscope.files
    cscope -Rbkqc -i cscope.files
    mv cscope.in.out  ./.tags/
    mv cscope.out ./.tags/
    mv cscope.po.out ./.tags/
    mv cscope.files ./.tags/
}

#不要搜索.svn目录和tags文件
export GREP_OPTIONS="--exclude-dir=\.svn --exclude-dir=\.tags --exclude-dir=\.git --exclude=core.* --exclude=*.o --exclude=*.a --exclude=*.b  --binary-files=without-match"
#git用vim输入提交日志
export GIT_EDITOR=vim
#生成core文件
ulimit -c unlimited

git config --global color.ui auto
git config --global color.diff auto
git config --global color.status auto
git config --global color.branch auto
git config --global core.editor vim
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.new 'ls-files --others --exclude-standard' 
git config --global alias.st 'status -uno'
git config --global alias.last 'cat-file commit HEAD'
git config --global alias.unstage 'reset HEAD '
git config --global alias.discard 'checkout -- '
git config --global diff.tool vimdiff
git config --global merge.tool vimdiff
git config --global difftool.prompt false
git config --global mergetool.prompt false
git config --global alias.di difftool
git config --global alias.mt mergetool
git config --global alias.gr '!git fetch && git pull --rebase origin '
git config --global alias.pr '!git push origin '
git config --global alias.sb show-branch
git config --global alias.sm submodule
source /etc/bash_completion.d/git
#
if [ -e /usr/share/terminfo/x/xterm-256color ]; then
    export TERM='xterm-256color'
else
    export TERM='xterm-color'
fi

